// Created by Flinto, LLC
// https://www.flinto.com

// Generated by CoffeeScript 1.6.3
(function() {
  var __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

  jQuery.fn.selectDescription = function(name) {
    var SelectDescription,
      _this = this;
    SelectDescription = (function() {
      function SelectDescription($el) {
        this.$el = $el;
        this.showCurrentDescription = __bind(this.showCurrentDescription, this);
        this.handleChange = __bind(this.handleChange, this);
        this.hideAllDescriptions = __bind(this.hideAllDescriptions, this);
        this.descriptionForOption = __bind(this.descriptionForOption, this);
        this.$el = $(this.$el);
        this.$el.change(this.handleChange);
        this.hideAllDescriptions();
        this.showCurrentDescription();
      }

      SelectDescription.prototype.descriptionForOption = function(option) {
        var description;
        if (option.data('description') != null) {
          description = $("#" + (option.data('description')));
        } else {
          description = $("#" + (option.attr('value')));
        }
        return description;
      };

      SelectDescription.prototype.hideAllDescriptions = function() {
        var _this = this;
        return this.$el.find('option').each(function(i, e) {
          return _this.descriptionForOption($(e)).hide();
        });
      };

      SelectDescription.prototype.handleChange = function(event) {
        this.hideAllDescriptions();
        return this.showCurrentDescription();
      };

      SelectDescription.prototype.showCurrentDescription = function() {
        var option;
        option = this.$el.find("option[value=" + (this.$el.val()) + "]");
        return this.descriptionForOption(option).show();
      };

      return SelectDescription;

    })();
    $(this).each(function(i, e) {
      return new SelectDescription($(e));
    });
    return $(this);
  };

}).call(this);
